{{ template "base" .}}
{{ define "content" }}
<div class="container">
      <div class="row">
        <div class="col">
          <img src="/static/images/generals-quarters.png" class="img-fluid img-thumbnail room-mage mx-auto d-block" alt="room image">
        </div>
      </div>

        <div class="row">
            <div class="col">
                <h1 class="text-center mt-4" >Generals Quarters</h1>
                <p>Your home away from home, set on the majestic waters of the Athlantic Ocean, this will be a vaction to remember Your home away from home, set on the majestic waters of the Athlantic Ocean, this will be a vaction to remember Your home away from home, set on the majestic waters of the Athlantic Ocean, this will be a vaction to remember Your home away from home, set on the majestic waters of the Athlantic Ocean, this will be a vaction to remember Your home away from home, set on the majestic waters of the Athlantic Ocean, this will be a vaction to remember Your home away from home, set on the majestic waters of the Athlantic Ocean, this will be a vaction to remember </p>

            </div>
        </div>

        <div class="row">
            <div class="col text-center">
                <a id="check-availability-button" href="#!" class="btn btn-success">Check Availbility</a>
            </div>
        </div>
        
    </div>
    </div>
    
{{end}}

{{ define "js" }}
<script>
  document.getElementById("check-availability-button").addEventListener("click", function (){
      let html= `
      <form id="check-availablility-from" action="" method="post" novalidate class="needs-validation">
        <div class="row">
          <div class="col">
            <div class="row" id="reservation-date-modal" >
            <div class="col">
              <input disabled required class ="form-control" type="text" name="start" id="start" placeholder="Arrival">
              </div>
            <div class="col">
              <input disabled required class ="form-control" type="text" name="end" id="end" placeholder="Departure">
              </div>
            </div>
            </div>
        </div>
        </form>
      `
      // let myEl = document.getElementById("my-paragraph");

      // if (myEl.classList.contains("redText")){
      //   myEl.classList.remove("redText");
      // } else {
      //   myEl.classList.add("redText");
      // }

      //notify("this is my message", "warning")
      //notifyModel('Error!', '<em>Hello World</em>', 'error', 'Cool')

      //attention.toast({msg: "hello World", icon: "error"});
      //attention.success({msg: "hello World"});
      //attention.error({msg: "hello World"});
      attention.custom({
        msg : html, 
        title: "Choice your dates",
        willOpen: () => {
              const elem = document.getElementById('reservation-date-modal');
              const rp = new DateRangePicker( elem, {
                format: 'yyyy-mm-dd',
                showOnFocus: true,
              })
            },
        didOpen: () => {
              document.getElementById('start').removeAttribute('disabled');
              document.getElementById('end').removeAttribute('disabled');
            },
        callback: function(result) {
          console.log("called");

          let form = document.getElementById("check-availablility-from");
          let formData = new FormData(form);
          formData.append("csrf_token","{{.CSRFToken}}");

          fetch('/search-availability-json',{
            method: "post",
            body: formData,
          })
            .then(response => response.json())
            .then(data => {
              console.log(data);
              console.log(data.ok);
              console.log(data.message);
            })
        }
        });
    })   
</script>
{{end}}